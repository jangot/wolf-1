!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=29)}([,function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var o=n(7),i=n(8),r=n(19),s=parseFloat,a=Math.min,c=Math.random;t.exports=function(t,e,n){if(n&&"boolean"!=typeof n&&i(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=r(t),void 0===e?(e=t,t=0):e=r(e)),t>e){var u=t;t=e,e=u}if(n||t%1||e%1){var f=c();return a(t+f*(e-t+s("1e-"+((f+"").length-1))),e)}return o(t,e)}},function(t,e,n){var o=n(4),i=n(15),r=n(16),s=o?o.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):r(t)}},function(t,e,n){var o=n(12).Symbol;t.exports=o},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var i=(s=o,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),r=o.sources.map((function(t){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(t," */")}));return[n].concat(r).concat([i]).join("\n")}var s,a,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,o){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(o)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(i[s]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);o&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e,n){"use strict";var o,i=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function a(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},o=[],i=0;i<t.length;i++){var r=t[i],c=e.base?r[0]+e.base:r[0],u=n[c]||0,f="".concat(c," ").concat(u);n[c]=u+1;var l=a(f),p={css:r[1],media:r[2],sourceMap:r[3]};-1!==l?(s[l].references++,s[l].updater(p)):s.push({identifier:f,updater:m(p,e),references:1}),o.push(f)}return o}function u(t){var e=document.createElement("style"),o=t.attributes||{};if(void 0===o.nonce){var i=n.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(t){e.setAttribute(t,o[t])})),"function"==typeof t.insert)t.insert(e);else{var s=r(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var f,l=(f=[],function(t,e){return f[t]=e,f.filter(Boolean).join("\n")});function p(t,e,n,o){var i=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(t.styleSheet)t.styleSheet.cssText=l(e,i);else{var r=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function d(t,e,n){var o=n.css,i=n.media,r=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),r&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var h=null,v=0;function m(t,e){var n,o,i;if(e.singleton){var r=v++;n=h||(h=u(e)),o=p.bind(null,n,r,!1),i=p.bind(null,n,r,!0)}else n=u(e),o=d.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=i());var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<n.length;o++){var i=a(n[o]);s[i].references--}for(var r=c(t,e),u=0;u<n.length;u++){var f=a(n[u]);0===s[f].references&&(s[f].updater(),s.splice(f,1))}n=r}}}},function(t,e){var n=Math.floor,o=Math.random;t.exports=function(t,e){return t+n(o()*(e-t+1))}},function(t,e,n){var o=n(9),i=n(10),r=n(18),s=n(1);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&r(e,n.length):"string"==a&&e in n)&&o(n[e],t)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var o=n(11),i=n(17);t.exports=function(t){return null!=t&&i(t.length)&&!o(t)}},function(t,e,n){var o=n(3),i=n(1);t.exports=function(t){if(!i(t))return!1;var e=o(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var o=n(13),i="object"==typeof self&&self&&self.Object===Object&&self,r=o||i||Function("return this")();t.exports=r},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(14))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var o=n(4),i=Object.prototype,r=i.hasOwnProperty,s=i.toString,a=o?o.toStringTag:void 0;t.exports=function(t){var e=r.call(t,a),n=t[a];try{t[a]=void 0;var o=!0}catch(t){}var i=s.call(t);return o&&(e?t[a]=n:delete t[a]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var o=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==o||"symbol"!=o&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var o=n(20);t.exports=function(t){return t?(t=o(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,n){var o=n(1),i=n(21),r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=a.test(t);return n||c.test(t)?u(t.slice(2),n?2:8):s.test(t)?NaN:+t}},function(t,e,n){var o=n(3),i=n(22);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==o(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},,,function(t,e,n){var o=n(6),i=n(27);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var r={insert:"head",singleton:!1};o(i,r);t.exports=i.locals||{}},function(t,e,n){"use strict";n.r(e);var o=n(5),i=n.n(o)()(!1);i.push([t.i,"*{margin:0;padding:0}.game{width:1200px;height:600px;background:#a9a9a9;position:relative}.messages{display:flex;width:100%;height:100%;position:relative}.messages .coll{position:absolute;width:200px;display:flex}.messages .coll div{border:1px red solid;width:40px;height:40px}.messages .coll div.active{background:red}.messages .coll.tl{top:0;left:0}.messages .coll.tr{top:0;right:0;flex-direction:row-reverse}.messages .coll.bl{top:120px;left:0}.messages .coll.br{top:120px;right:0;flex-direction:row-reverse}.crashed{display:flex;position:absolute;left:0;right:0;bottom:0}.crashed .coll{margin:0 20px;display:flex;position:absolute}.crashed .coll.left{flex-direction:row-reverse;left:0;bottom:0}.crashed .coll.right{right:0;bottom:0}.crashed .coll div{width:40px;height:40px;border:1px #9acd32 solid}.crashed .coll div.active{background:#9acd32}.woolf{position:absolute;width:800px;height:160px;top:60px;left:50%;margin-left:-400px}.woolf div{border:1px green solid;width:40px;height:40px;position:absolute}.woolf div.tl{top:0;left:0}.woolf div.tr{top:0;right:0}.woolf div.bl{bottom:0;left:0}.woolf div.br{bottom:0;right:0}.woolf div.active{background:green}.tapper{position:absolute;top:0;right:0;bottom:0;left:0;z-index:100;background:#ff0;opacity:.2}.tapper div{position:absolute;width:50%;height:50%;border:1px #9acd32 solid}.tapper div.tl{top:0;left:0}.tapper div.tr{top:0;right:0}.tapper div.bl{bottom:0;left:0}.tapper div.br{bottom:0;right:0}",""]),e.default=i},,function(t,e,n){"use strict";n.r(e);var o,i,r,s;n(26);!function(t){t.TL="tl",t.TR="tr",t.BL="bl",t.BR="br"}(o||(o={})),function(t){t.LEFT="left",t.RIGHT="right"}(i||(i={})),function(t){t.START="start",t.STOP="stop",t.TICK="tick",t.FAIL="fail"}(r||(r={})),function(t){t.SIMPLE="simple"}(s||(s={}));var a=n(2),c=n.n(a),u=n(23),f=n.n(u),l=[o.TL,o.TR,o.BL,o.BR],p=function(){function t(){this.events=[],this.resetState()}return t.prototype.on=function(t,e){this.events.push({name:t,cb:e})},t.prototype.start=function(){this.isRun=!0,this.resetState(),this.emit(r.START),this.tick()},t.prototype.stop=function(){this.isRun=!1,clearTimeout(this.timeout),this.emit(r.STOP)},t.prototype.tick=function(){var t=this;this.update(),this.emit(r.TICK),this.isRun&&(this.timeout=setTimeout((function(){t.tick()}),this.tickTime))},t.prototype.setWolfPosition=function(t){this.wolfPosition=t},t.prototype.resetState=function(){var t,e;this.tickTime=1e3,this.wolfPosition=o.TL,this.messages=((t={})[o.TL]=this.getLineMessages(6),t[o.TR]=this.getLineMessages(6),t[o.BL]=this.getLineMessages(6),t[o.BR]=this.getLineMessages(6),t),this.score=0,this.errors=0,this.crashed=((e={})[i.LEFT]=this.getLineMessages(5),e[i.RIGHT]=this.getLineMessages(5),e),this.wolfPosition=o.TR},t.prototype.emit=function(t){this.events.forEach((function(e){var n=e.name,o=e.cb;t===n&&o()}))},t.prototype.getLineMessages=function(t){for(var e=[],n=0;n<t;n++)e.push({type:s.SIMPLE,status:!1});return e},t.prototype.update=function(){this.updateMessages(),this.setNewItem(),this.updateScore(),this.updateCrashed(),this.setNewCrashed(),this.checkStatus()},t.prototype.updateMessages=function(){this.updateLine(this.messages[o.TL]),this.updateLine(this.messages[o.TR]),this.updateLine(this.messages[o.BL]),this.updateLine(this.messages[o.BR])},t.prototype.updateCrashed=function(){this.updateLine(this.crashed[i.LEFT]),this.updateLine(this.crashed[i.RIGHT])},t.prototype.updateLine=function(t){t.reduce((function(t,e){var n=e.status,o=e.type;return e.status=t.status,e.type=t.type,{status:n,type:o}}),{status:!1,type:s.SIMPLE})},t.prototype.setNewItem=function(){if(!(c()(1,100)<40)){var t=c()(0,3),e=l[t];this.messages[e][0].status=!0}},t.prototype.setNewCrashed=function(){if(this.fail){var t=i.LEFT;this.fail!==o.BR&&this.fail!==o.TR||(t=i.RIGHT),this.crashed[t][0].status=!0}},t.prototype.updateScore=function(){var t=this,e=null;l.forEach((function(n){f()(t.messages[n]).status&&(e=n)})),e?e===this.wolfPosition?(this.fail=null,this.score++,this.lessTime()):(this.fail=e,this.errors++):this.fail=null},t.prototype.checkStatus=function(){this.errors<3||(this.emit(r.FAIL),this.stop())},t.prototype.lessTime=function(){this.tickTime>200&&(this.tickTime-=3)},t}();var d=function(){function t(t){this.el=document.querySelector(t)}return t.prototype.addClass=function(t){return this.el?(function(t,e){var n=t.className.split(" ");-1==n.indexOf(e)&&(n.push(e),t.className=n.filter((function(t){return!!t})).join(" "))}(this.el,t),this):this},t.prototype.removeClass=function(t){return this.el?(function(t,e){var n=t.className.split(" ");t.className=n.filter((function(t){return t!==e})).join(" ")}(this.el,t),this):this},t.prototype.html=function(t){return this.el?(this.el.innerHTML=t,this):this},t.prototype.on=function(t,e){return this.el?(this.el.addEventListener(t,e),this):this},t}();function h(t){return new d(t)}o.TL,o.TR,o.BL,o.BR;var v=[{position:o.TL,code:"KeyQ"},{position:o.TR,code:"KeyP"},{position:o.BL,code:"KeyA"},{position:o.BR,code:"KeyL"}];function m(t,e){e[t].forEach((function(e,n){var o=h(".messages ."+t+" div:nth-child("+(n+1)+")");o&&(e.status?o.addClass("active"):o.removeClass("active"))}))}function g(t,e){e[t].forEach((function(e,n){var o=h(".crashed ."+t+" div:nth-child("+(n+1)+")");e.status?o.addClass("active"):o.removeClass("active")}))}o.TL,o.TR,o.BL,o.BR;var b=new p;b.on(r.START,(function(){console.log("Start")})),b.on(r.TICK,(function(){m(o.TL,b.messages),m(o.TR,b.messages),m(o.BL,b.messages),m(o.BR,b.messages)})),b.on(r.TICK,(function(){g(i.LEFT,b.crashed),g(i.RIGHT,b.crashed)})),b.on(r.TICK,(function(){h(".fail").html(b.fail||"non"),h(".score").html("v4 / "+b.score+" / "+b.errors)})),b.on(r.STOP,(function(){console.log("SCORE:",b.score)})),function(t){function e(e,n){t.isRun&&(t.setWolfPosition(n),h(".woolf .active").removeClass("active"),e.addClass("active"))}v.forEach((function(t){var n=t.position,o=t.code,i=h(".woolf ."+n);h(".keyboard ."+n).on("touchstart",(function(){return e(i,n)})),window.addEventListener("keypress",(function(t){t.code===o&&e(i,n)}))})),h(".controls .start").on("click",(function(){return t.start()})),h(".controls .stop").on("click",(function(){return t.stop()})),t.on(r.START,(function(){e(h(".woolf ."+o.TL),o.TL)}))}(b)}]);